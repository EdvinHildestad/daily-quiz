{% extends "base.html" %}

{% block title %}Profile - Daily Quiz{% endblock %}

{% block content %}
<div class="profile-section">
    <h1>{{ current_user.username }}'s Profile</h1>
    <p class="profile-info">Email: {{ current_user.email }}</p>
    <p class="profile-info">Member since: {{ current_user.created_at.strftime('%B %d, %Y') }}</p>
</div>

<div class="stats-section">
    <h2>Game Statistics</h2>
    <div class="stats-grid">
        {% for game in games %}
        <div class="stat-card">
            <h3>{{ game.name }}</h3>
            {% if game_stats[game.name] %}
                <div class="stat-details">
                    <p><strong>Games Played:</strong> {{ game_stats[game.name].count }}</p>
                    <p><strong>Total Score:</strong> {{ game_stats[game.name].total }}</p>
                    <p><strong>Average Score:</strong> {{ game_stats[game.name].average }}</p>
                    <p><strong>Best Score:</strong> {{ game_stats[game.name].best }}</p>
                </div>
            {% else %}
                <p class="no-data">No scores yet</p>
            {% endif %}
            <a href="{{ url_for('add_score', game_name=game.name) }}" class="btn btn-small">Add Score</a>
        </div>
        {% endfor %}
    </div>
</div>

<div class="scores-section">
    <h2>Recent Scores</h2>
    {% if scores %}
    <table class="scores-table">
        <thead>
            <tr>
                <th>Game</th>
                <th>Score</th>
                <th>Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for score in scores %}
            <tr>
                <td>{{ score.game_name }}</td>
                <td>{{ score.score }}</td>
                <td>{{ score.date.strftime('%Y-%m-%d') }}</td>
                <td>
                    <form method="POST" action="{{ url_for('delete_score', score_id=score.id) }}" style="display: inline;">
                        <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this score?')">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">No scores recorded yet. Start playing and add your scores!</p>
    {% endif %}
</div>
{% endblock %}
